window.dataLayer = window.dataLayer || [];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-XLKTEKS2TD');const hamburger = document.getElementById('hamburger');const navMenu = document.getElementById('navMenu');hamburger.addEventListener('click',()=>{hamburger.classList.toggle('active');navMenu.classList.toggle('active');});document.querySelectorAll('nav a').forEach(link =>{link.addEventListener('click',()=>{hamburger.classList.remove('active');navMenu.classList.remove('active');});});document.querySelectorAll('a[href^="#"]').forEach(anchor =>{anchor.addEventListener('click',function(e){e.preventDefault();const target = document.querySelector(this.getAttribute('href'));if(target){target.scrollIntoView({behavior:'smooth',block:'start'});}});});function setSubject(subject){setTimeout(()=>{document.getElementById('subject').value = subject;},500);}const stickyCta = document.getElementById('stickyCta');const ctaStrip = document.querySelector('.cta-strip');window.addEventListener('scroll',()=>{if(window.innerWidth <= 768){const ctaStripRect = ctaStrip.getBoundingClientRect();if(ctaStripRect.bottom < 0){stickyCta.classList.add('visible');}else{stickyCta.classList.remove('visible');}}});document.getElementById('addToCalendar').addEventListener('click',function(e){e.preventDefault();const title = 'Sturbridge Town Election - Vote for Kadion Phillips for Select Board';const location = 'Sturbridge Town Hall';const details = 'Remember to vote for Kadion Phillips for Sturbridge Select Board!';const startDate = '20260413T080000';const endDate = '20260413T120000';const googleCalUrl = `https:window.open(googleCalUrl,'_blank');});document.getElementById('contactForm').addEventListener('submit',async function(e){e.preventDefault();const formMessage = document.getElementById('formMessage');const submitBtn = this.querySelector('.submit-btn');submitBtn.disabled = true;submitBtn.textContent = 'Sending...';try{const response = await fetch(this.action,{method:'POST',body:new FormData(this),headers:{'Accept':'application/json'}});console.log('Response status:',response.status);if(response.ok){this.reset();formMessage.className = 'form-message success';formMessage.textContent = '✓ Message sent successfully! Thank you for reaching out. I will get back to you soon.';formMessage.style.display = 'block';}else{throw new Error('Form submission failed');}}catch(error){console.error('Form error:',error);formMessage.className = 'form-message error';formMessage.textContent = '✗ Oops! There was a problem sending your message. Please try again.';formMessage.style.display = 'block';}finally{submitBtn.disabled = false;submitBtn.textContent = 'Send Message';}setTimeout(()=>{formMessage.style.display = 'none';},5000);});document.getElementById('copyLinkBtn').addEventListener('click',function(){const url = 'https:const btn = this;const btnText = document.getElementById('copyBtnText');if(navigator.clipboard && navigator.clipboard.writeText){navigator.clipboard.writeText(url).then(()=>{btn.classList.add('copied');btnText.textContent = '✓ Link Copied!';setTimeout(()=>{btn.classList.remove('copied');btnText.textContent = 'Copy Link';},3000);}).catch(err =>{console.error('Failed to copy:',err);alert('Copy failed. Please copy manually:' + url);});}else{const textArea = document.createElement('textarea');textArea.value = url;textArea.style.position = 'fixed';textArea.style.left = '-999999px';document.body.appendChild(textArea);textArea.select();try{document.execCommand('copy');btn.classList.add('copied');btnText.textContent = '✓ Link Copied!';setTimeout(()=>{btn.classList.remove('copied');btnText.textContent = 'Copy Link';},3000);}catch(err){alert('Copy failed. Please copy manually:' + url);}document.body.removeChild(textArea);}});let currentIndex = 0;const slides = document.querySelectorAll("#fadeSlider .slide");const dotsContainer = document.querySelector("#fadeSlider .slider-dots");const sliderElement = document.querySelector("#fadeSlider");let autoplayInterval;slides.forEach((_,i)=>{const dot = document.createElement("div");dot.className = "dot" +(i === 0 ? " active":"");dot.addEventListener("click",()=> goToSlide(i));dotsContainer.appendChild(dot);});function updateSlider(){slides.forEach((slide,i)=>{slide.classList.toggle("active",i === currentIndex);});document.querySelectorAll("#fadeSlider .dot").forEach((dot,i)=>{dot.classList.toggle("active",i === currentIndex);});}function goToSlide(index){currentIndex =(index + slides.length)% slides.length;updateSlider();}document.querySelector("#fadeSlider .next").addEventListener("click",()=>{goToSlide(currentIndex + 1);restartAutoplay();});document.querySelector("#fadeSlider .prev").addEventListener("click",()=>{goToSlide(currentIndex - 1);restartAutoplay();});function startAutoplay(){autoplayInterval = setInterval(()=>{goToSlide(currentIndex + 1);},3000);}function stopAutoplay(){clearInterval(autoplayInterval);}function restartAutoplay(){stopAutoplay();startAutoplay();}sliderElement.addEventListener("mouseenter",stopAutoplay);sliderElement.addEventListener("mouseleave",startAutoplay);let touchStartX = 0;let touchEndX = 0;const swipeThreshold = 50;sliderElement.addEventListener('touchstart',e =>{touchStartX = e.changedTouches[0].screenX;stopAutoplay();});sliderElement.addEventListener('touchend',e =>{touchEndX = e.changedTouches[0].screenX;handleSwipe();startAutoplay();});function handleSwipe(){const diff = touchEndX - touchStartX;if(Math.abs(diff)> swipeThreshold){if(diff < 0){goToSlide(currentIndex + 1);}else{goToSlide(currentIndex - 1);}}}slides.forEach(slide =>{const img = slide.querySelector("img");img.addEventListener("dblclick",()=>{window.open(img.src,"_blank");});});updateSlider();startAutoplay();const sections = document.querySelectorAll("section");const navLinks = document.querySelectorAll("nav a");window.addEventListener("scroll",()=>{let current = "";sections.forEach(section =>{const top = section.offsetTop - 120;if(pageYOffset >= top)current = section.getAttribute("id");});navLinks.forEach(a =>{a.classList.toggle("active",a.getAttribute("href")=== `#${current}`);});});